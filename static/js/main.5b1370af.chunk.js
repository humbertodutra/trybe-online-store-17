(this["webpackJsonpsd-0x-project-frontend-online-store"]=this["webpackJsonpsd-0x-project-frontend-online-store"]||[]).push([[0],{23:function(e,t,a){e.exports=a(46)},28:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),i=a.n(c),o=(a(28),a(8)),l=a(5),s=a(6),u=a.n(s),m=a(10),d=a(1),p=a(2),h=a(4),f=a(3),v=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleClick=Object(m.a)(u.a.mark((function t(){var a,n,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props,n=a.fetchProducts,r=a.category,t.next=3,n(r.id);case 3:case"end":return t.stop()}}),t)}))),e}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.category;return r.a.createElement("button",{"data-testid":"category",type:"button",className:"category-button",onClick:this.handleClick},e.name)}}]),a}(r.a.Component),E=a(15),b=function(e){var t=e.id,a=e.title,n=e.thumbnail,r=e.price,c={id:t,title:a,thumbnail:n,quantity:1,price:r},i=JSON.parse(localStorage.getItem("cartItems"));if(i){var o=function(e,t){var a=e.find((function(e){return e.id===t.id&&e}));if(a){console.log(a),a.quantity+=1;var n=e.filter((function(e){return e.id!==a.id}));return[].concat(Object(E.a)(n),[a])}return[].concat(Object(E.a)(e),[t])}(i,c);localStorage.setItem("cartItems",JSON.stringify(o))}else localStorage.setItem("cartItems",JSON.stringify([{id:t,title:a,thumbnail:n,quantity:1,price:r}]))},g=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.thumbnail,a=e.price,n=e.title,c=e.id,i=e.product;return r.a.createElement("div",{"data-testid":"product",className:"product-card"},r.a.createElement(o.b,{"data-testid":"product-detail-link",to:"/".concat(c),className:"product-card__link"},r.a.createElement("div",{className:"img-div"},r.a.createElement("img",{src:t,alt:n}))),r.a.createElement("div",{className:"info-div"},r.a.createElement(o.b,{"data-testid":"product-detail-link",to:"/".concat(c),className:"product-card__link"},r.a.createElement("h2",{"data-testid":"shopping-cart-product-name"},n)),r.a.createElement("div",{className:"price"},r.a.createElement("span",null,"R$".concat((Math.round(100*a)/100).toFixed(2))))),r.a.createElement("button",{className:"addCartBtn",type:"button","data-testid":"product-add-to-cart",onClick:function(){return b(i)}},"Adicionar ao Carrinho"))}}]),a}(r.a.Component);function y(){return _.apply(this,arguments)}function _(){return(_=Object(m.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.mercadolibre.com/sites/MLB/categories",e.next=3,fetch("https://api.mercadolibre.com/sites/MLB/categories");case 3:return t=e.sent,e.next=6,t.json();case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e,t){return O.apply(this,arguments)}function O(){return(O=Object(m.a)(u.a.mark((function e(t,a){var n,r,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="https://api.mercadolibre.com/sites/MLB/search?q=".concat(a),r="https://api.mercadolibre.com/sites/MLB/search?category=".concat(t),c="https://api.mercadolibre.com/sites/MLB/search?category=".concat(t,"&q=").concat(a),i="",t){e.next=8;break}return e.next=7,fetch(n);case 7:i=e.sent;case 8:if(a){e.next=12;break}return e.next=11,fetch(r);case 11:i=e.sent;case 12:return e.next=14,fetch(c);case 14:return i=e.sent,e.abrupt("return",i.json());case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement(o.b,{"data-testid":"shopping-cart-button",className:"cart-link",to:{pathname:"/cart"}},r.a.createElement("span",null,"Carrinho"))}}]),a}(r.a.Component),C=(a(38),function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("header",{className:"header"},r.a.createElement(o.b,{className:"title",to:"/"},r.a.createElement("h1",null,"Trybe Online Store")),r.a.createElement(k,null))}}]),a}(r.a.Component)),j=(a(39),function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).fetchCategories=Object(m.a)(u.a.mark((function t(){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y();case 2:a=t.sent,e.setState({categories:a});case 4:case"end":return t.stop()}}),t)}))),e.handleChange=function(){var t=Object(m.a)(u.a.mark((function t(a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=a.target.value,e.setState({search:n});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.fetchProducts=Object(m.a)(u.a.mark((function t(){var a,n,r,c=arguments;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>0&&void 0!==c[0]?c[0]:"",n=e.state.search,t.next=4,N(a,n);case 4:0===(r=t.sent).results.length?e.setState({status:"not found"}):e.setState({APIresult:r.results,status:""});case 6:case"end":return t.stop()}}),t)}))),e.state={categories:[],search:"",APIresult:[],status:""},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.fetchCategories()}},{key:"render",value:function(){var e=this,t=this.state,a=t.categories,n=t.search,c=t.APIresult,i=t.status;return r.a.createElement(r.a.Fragment,null,r.a.createElement(C,null),r.a.createElement("main",{className:"home-page"},r.a.createElement("aside",{className:"aside"},r.a.createElement("nav",{className:"category-list"},a.map((function(t){return r.a.createElement(v,{key:t.id,category:t,search:n,fetchProducts:e.fetchProducts})})))),r.a.createElement("section",{className:"main-section"},r.a.createElement("div",{className:"search-div"},r.a.createElement("h1",{"data-testid":"home-initial-message"},"Digite algum termo de pesquisa ou escolha uma categoria."),r.a.createElement("input",{className:"search-input",type:"text",name:"search",value:n,onChange:this.handleChange,"data-testid":"query-input"}),r.a.createElement("button",{className:"search-button",type:"button",onClick:this.fetchProducts,"data-testid":"query-button"},"Pesquisar")),"not found"===i?r.a.createElement("span",{className:"not-found"},"Nenhum produto foi encontrado \ud83d\ude1e"):r.a.createElement("div",{className:"product-section"},c.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement(g,{price:e.price,thumbnail:e.thumbnail,title:e.title,id:e.id,product:e}))}))))))}}]),a}(r.a.Component)),S=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.product,a=e.increaseQuantity,n=e.decreaseQuantity,c=e.checkoutPage,i=e.itemTotal,l=t.thumbnail,s=t.price,u=t.title,m=t.id;return r.a.createElement("main",{"data-testid":"product",className:"product-card-large"},r.a.createElement(o.b,{"data-testid":"product-detail-link",to:"/".concat(m),className:"product-img-link"},r.a.createElement("img",{src:l,alt:u})),r.a.createElement("section",{className:"product-card-large__info"},r.a.createElement(o.b,{"data-testid":"product-detail-link",to:"/".concat(m),className:"title-link"},r.a.createElement("h2",{"data-testid":"shopping-cart-product-name"},u)),c?r.a.createElement("aside",{className:"product-card-large__aside"},r.a.createElement("span",{"data-testid":"shopping-cart-product-quantity",className:"__info--quantity"},"Qnt. ".concat(t.quantity.toString())),r.a.createElement("span",{className:"__info--price"},"R$".concat((Math.round(100*i)/100).toFixed(2)))):r.a.createElement("aside",{className:"product-card-large__aside"},r.a.createElement("div",{className:"product-card-large__aside--div"},r.a.createElement("button",{className:"product-card-large__aside--button",type:"button","data-testid":"product-decrease-quantity",onClick:function(){return n(t)}},"-"),r.a.createElement("span",{"data-testid":"shopping-cart-product-quantity",className:"__info--quantity"},t.quantity.toString()),r.a.createElement("button",{className:"product-card-large__aside--button",type:"button","data-testid":"product-increase-quantity",onClick:function(){return a(t)}},"+"),r.a.createElement("span",{className:"__info--price"},"R$".concat((Math.round(100*s)/100).toFixed(2)))))))}}]),a}(r.a.Component);S.defaultProps={itemTotal:null};var I=S,w=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement(o.b,{to:"/checkout"},r.a.createElement("button",{"data-testid":"checkout-products",type:"button",className:"checkout-button"},"Finalizar Compra"))}}]),a}(r.a.Component),x=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement(o.b,{to:"/",className:"keep-Shopping-btn"},"Continuar Comprando")}}]),a}(r.a.Component),P=(a(40),function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).getCartItens=Object(m.a)(u.a.mark((function t(){var a,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,JSON.parse(localStorage.getItem("cartItems"));case 2:a=t.sent,e.setState({savedItens:a}),n=e.state.savedItens,console.log(n);case 6:case"end":return t.stop()}}),t)}))),e.increaseQuantity=function(t){var a=e.state.savedItens,n=a.map((function(e){return e.id===t.id&&(e.quantity+=1),e}));e.setState({savedItens:n}),localStorage.setItem("cartItems",JSON.stringify(a)),e.totalPrinceOnCart()},e.decreaseQuantity=function(t){var a=e.state.savedItens.map((function(e){return e.id===t.id&&e.quantity>0&&(e.quantity-=1),e})).filter((function(e){return e.quantity>0}));e.setState({savedItens:a}),localStorage.setItem("cartItems",JSON.stringify(a)),e.totalPrinceOnCart()},e.totalPrinceOnCart=function(){var t=e.state.savedItens;if(0===t.length)return 0;var a=t.reduce((function(e,t){return e+t.price*t.quantity}),0);return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a)},e.state={savedItens:[]},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){localStorage.length>0&&this.getCartItens()}},{key:"render",value:function(){var e=this,t=this.state.savedItens;return r.a.createElement(r.a.Fragment,null,r.a.createElement(C,null),r.a.createElement("main",{className:"cart-page"},r.a.createElement("section",{className:"cart-page__list-section"},0===t.length?r.a.createElement("h1",{"data-testid":"shopping-cart-empty-message",className:"cart__not-found"},"Seu carrinho est\xe1 vazio \ud83d\ude22"):t.map((function(t){return r.a.createElement("div",{key:t.id},r.a.createElement(I,{price:t.price,thumbnail:t.thumbnail,title:t.title,id:t.id,product:t,increaseQuantity:e.increaseQuantity,decreaseQuantity:e.decreaseQuantity,checkoutPage:!1}))}))),0!==t.length&&r.a.createElement("aside",{className:"cart-page__aside"},r.a.createElement("span",{className:"cart-page__aside--price"},0===t.length?"Seu carrinho est\xe1 vazio \ud83d\ude22":"Subtotal: ".concat(this.totalPrinceOnCart())),r.a.createElement(x,null),r.a.createElement(w,null))))}}]),a}(r.a.Component)),M=a(22),q=(a(41),function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).getData=function(){var t=JSON.parse(localStorage.getItem("reviews"));t&&e.setState({reviews:t})},e.callDetails=Object(m.a)(u.a.mark((function t(){var a,n,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=e.props.match.params.id,t.next=4,fetch("".concat("https://api.mercadolibre.com/items/").concat(a));case 4:return n=t.sent,t.next=7,n.json();case 7:r=t.sent,e.setState({product:r}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])}))),e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(M.a)({},n,r))},e.handleSubmit=function(t){t.preventDefault();var a=e.state,n={email:a.email,rating:a.rating,comment:a.comment};e.setState((function(e){return{reviews:[].concat(Object(E.a)(e.reviews),[n]),email:"",rating:"",comment:""}}),(function(){return e.saveItem()}))},e.saveItem=function(){var t=e.state.reviews;localStorage.setItem("reviews",JSON.stringify(t))},e.state={product:{},email:"",rating:"",comment:"",reviews:[]},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.callDetails(),this.getData()}},{key:"render",value:function(){var e=this.state,t=e.product,a=e.email,n=e.comment,c=e.reviews;return r.a.createElement(r.a.Fragment,null,r.a.createElement(C,null),r.a.createElement("main",{className:"details-page"},r.a.createElement("section",{className:"details-page__container"},r.a.createElement("div",{className:"__container--info"},r.a.createElement("h1",{className:"__container--info--name","data-testid":"product-detail-name"},t.title),r.a.createElement("img",{src:t.thumbnail,alt:t.title,className:"__container--info--image"})),r.a.createElement("aside",{className:"__container--aside"},r.a.createElement("span",{className:"__container--aside--price"},"R$ ".concat(t.price)),r.a.createElement("button",{className:"addCartBtn",type:"button","data-testid":"product-detail-add-to-cart",onClick:function(){return b(t)}},"Adicionar ao Carrinho"))),r.a.createElement("form",{onSubmit:this.handleSubmit,className:"details-page__form"},r.a.createElement("h1",null,"Deixe sua avalia\xe7\xe3o"),r.a.createElement("label",{className:"__form--label",htmlFor:"email"},"E-mail",r.a.createElement("input",{className:"__form--input",id:"email",name:"email",type:"email",placeholder:"exemplo@exemplo.com","data-testid":"product-detail-email",value:a,onChange:this.handleChange})),r.a.createElement("div",{className:"__form--rating"},r.a.createElement("input",{name:"rating",type:"radio",value:"1","data-testid":"1-rating",onChange:this.handleChange}),r.a.createElement("input",{name:"rating",type:"radio",value:"2","data-testid":"2-rating",onChange:this.handleChange}),r.a.createElement("input",{name:"rating",type:"radio",value:"3","data-testid":"3-rating",onChange:this.handleChange}),r.a.createElement("input",{name:"rating",type:"radio",value:"4","data-testid":"4-rating",onChange:this.handleChange}),r.a.createElement("input",{name:"rating",type:"radio",value:"5","data-testid":"5-rating",onChange:this.handleChange})),r.a.createElement("label",{htmlFor:"comment",className:"__form--label"},"Seu coment\xe1rio",r.a.createElement("textarea",{id:"comment",className:"__form--textarea",name:"comment",placeholder:"Mensagem (opcional)","data-testid":"product-detail-evaluation",value:n,onChange:this.handleChange})),r.a.createElement("button",{type:"submit","data-testid":"submit-review-btn",className:"__form--submmit-btn"},"Avaliar")),r.a.createElement("section",{className:"details-page__review"},c.length>0&&c.map((function(e){return r.a.createElement("div",{key:e.email,className:"__review--div"},r.a.createElement("h3",null,e.email),r.a.createElement("span",{className:"--review-rating"},"Nota: ".concat(e.rating)),r.a.createElement("span",{className:"--review-comment"},e.comment))})))))}}]),a}(r.a.Component)),R=(a(42),function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).getCartItens=function(){var t=JSON.parse(localStorage.getItem("cartItems"));e.setState({savedItems:t})},e.format=function(e){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)},e.state={savedItems:[]},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){localStorage.length>0&&this.getCartItens()}},{key:"render",value:function(){var e=this.state.savedItems,t=0;return r.a.createElement(r.a.Fragment,null,r.a.createElement(C,null),r.a.createElement("main",{className:"checkout-page__main"},r.a.createElement("section",{className:"__main--content"},r.a.createElement("ul",{className:"checkoutPage__content--list"},e.map((function(e){var a=e.price*e.quantity;return t+=a,r.a.createElement("li",{key:e.id},r.a.createElement(I,{thumbnail:e.thumbnail,price:e.price,title:e.title,id:e.id,product:e,checkoutPage:!0,itemTotal:a}))}))),r.a.createElement("aside",{className:"__main--aside"},r.a.createElement("span",{className:"__main--total"},"Total do pedido: ".concat(this.format(t))),r.a.createElement(x,null))),r.a.createElement("form",{className:"checkout-page__form",onSubmit:this.onSubmitButtonClick},r.a.createElement("h2",null,"Informa\xe7\xf5es do Comprador"),r.a.createElement("div",{className:"__form--personal-info"},r.a.createElement("input",{"data-testid":"checkout-fullname",placeholder:"Nome Completo",className:"__form--input"}),r.a.createElement("input",{"data-testid":"checkout-email",placeholder:"E-mail",className:"__form--input"}),r.a.createElement("input",{"data-testid":"checkout-cpf",placeholder:"CPF",className:"__form--input"}),r.a.createElement("input",{"data-testid":"checkout-phone",placeholder:"Telefone",className:"__form--input"}),r.a.createElement("input",{"data-testid":"checkout-cep",placeholder:"CEP",className:"__form--input"}),r.a.createElement("input",{"data-testid":"checkout-address",placeholder:"Endere\xe7o",className:"__form--input"})),r.a.createElement("select",{className:"__form--select"},r.a.createElement("option",{value:"",hidden:!0},"Estado"),r.a.createElement("option",{value:"AM"},"AM"),r.a.createElement("option",{value:"AP"},"AP"),r.a.createElement("option",{value:"AC"},"AC"),r.a.createElement("option",{value:"AL"},"AL"),r.a.createElement("option",{value:"BA"},"BA"),r.a.createElement("option",{value:"CE"},"CE"),r.a.createElement("option",{value:"DF"},"DF"),r.a.createElement("option",{value:"ES"},"ES"),r.a.createElement("option",{value:"GO"},"GO"),r.a.createElement("option",{value:"MA"},"MA"),r.a.createElement("option",{value:"PI"},"PI"),r.a.createElement("option",{value:"MG"},"MG"),r.a.createElement("option",{value:"MT"},"MT"),r.a.createElement("option",{value:"MS"},"MS"),r.a.createElement("option",{value:"PA"},"PA"),r.a.createElement("option",{value:"PB"},"PB"),r.a.createElement("option",{value:"PE"},"PE"),r.a.createElement("option",{value:"PR"},"PR"),r.a.createElement("option",{value:"RJ"},"RJ"),r.a.createElement("option",{value:"RO"},"RO"),r.a.createElement("option",{value:"RR"},"RR"),r.a.createElement("option",{value:"SE"},"SE"),r.a.createElement("option",{value:"SP"},"SP"),r.a.createElement("option",{value:"TO"},"TO"),r.a.createElement("option",{value:"RN"},"RN"),r.a.createElement("option",{value:"RS"},"RS"),r.a.createElement("option",{value:"SC"},"SC")),r.a.createElement("fieldset",{className:"__form--payment"},r.a.createElement("legend",null,"Forma de pagamento"),r.a.createElement("label",{htmlFor:"credito"},"Cart\xe3o de Cr\xe9dito",r.a.createElement("input",{id:"credito",type:"radio",value:"credito"})),r.a.createElement("label",{htmlFor:"debito"},"Cart\xe3o de D\xe9bito",r.a.createElement("input",{id:"debito",type:"radio",value:"debito"})),r.a.createElement("label",{htmlFor:"boleto"},"Boleto Banc\xe1rio",r.a.createElement("input",{id:"boleto",type:"radio",value:"boleto"})),r.a.createElement("label",{htmlFor:"pix"},"Pix",r.a.createElement("input",{id:"pix",type:"radio",value:"boleto"}))),r.a.createElement("button",{className:"__form--purchase",type:"submit"},"Finalizar Compra"))))}}]),a}(r.a.Component));a(43),a(44),a(45);var A=function(){return r.a.createElement(o.a,{basename:"/humbertodutra/Trybe-online-store-17"},r.a.createElement(o.a,null,r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/cart",component:P}),r.a.createElement(l.a,{path:"/checkout",component:R}),r.a.createElement(l.a,{exact:!0,path:"/:id",component:q}),r.a.createElement(l.a,{path:"/",component:j}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[23,1,2]]]);
//# sourceMappingURL=main.5b1370af.chunk.js.map